// Generated by /home/bsc28/bsc28600/work/20201023-experimental/ompss-2-testgen/ompss-2-testgen --nodes 3 --tasks 1000 --nesting 4 --seed 8 --watchdog 3 --enable-file simplify-control.txt
//01010000000000000000000000000000000000000000000000000000000000000000000000000000
//00000000000000000000000000000000000000000000000000000000000000000000000000000000
//00000000000000000000000000000000000000000000000000000010000000000000000000100100
//01000000001000000000000000001000000000100000000000000000000000010000000000000000
//00000000000000000000000000000000000000000000000000000000000000000000000000000000
//00000000000000000000000000000000000000000000000000000000000000000000000000000000
//00000000000000000000000000000000000000000000000000000000000000000000000000000000
//00000000000000000000000000000000000000000000000000000000000000000000000000000000
//00000000000000000000000000000000000000000000000000000000000000000000000000000000
//00000000000000000000000000000000000000000000000000000000000000000000000000000000
//00000000000000000000000000000000000000000000000000000000000000000000000000000000
//00000000000000000000000000000000000000000000000000000000000000000000000000000000
//00000000000000000000000000000000000000000000000000000000000000000000000000000000
//00000000000000000000000000000000000000000000000000000000000000000000000000000000
//00000000000000000000000000000000000000000000000000000000000000000000000000000000
//000000000000000000000


#include "util.h"
#include <stdio.h>
#include <stdlib.h>
#include <string.h>
#include <nanos6.h>
#include <unistd.h>
#include <pthread.h>


void func_a(int *a)
{
}

void func_b(int *a)
{
}

void func_c(int *a)
{
    #pragma oss task weakin(a[869;4]) in(a[856;1]) node(1) label("a")
    func_a(a);
    
    #pragma oss task weakin(a[854;3]) node(1) label("b")
    func_b(a);
}

void func_d(int *a)
{
}

void func_e(int *a)
{
	sleep(1);
    #pragma oss task in(a[854;3]) in(a[864;12]) node(1) label("c")
    func_c(a);
    
    #pragma oss task in(a[871;6]) node(1) label("d")
    func_d(a);
    
}

void func_f()
{
}

void func_g()
{
}

void func_h()
{
    #pragma oss task node(2) label("f")
    func_f();
    
    #pragma oss task node(0) label("g")
    func_g();
}



int main(void)
{
	int *a = nanos6_dmalloc(1000 * sizeof(int), nanos6_equpart_distribution, 0, NULL);

    #pragma oss taskwait on(a[884;3])
	
	printf("after taskwait on\n");
    
    #pragma oss task in(a[851;26]) node(1) label("e")
    func_e(a);
    
    #pragma oss task node(0) label("h")
    func_h();
    
    #pragma oss taskwait
    
   nanos6_dfree(a, 1000 * sizeof(int));

    printf("Test passed [/home/bsc28/bsc28600/work/20201023-experimental/ompss-2-testgen/ompss-2-testgen --nodes 3 --tasks 1000 --nesting 4 --seed 8 --watchdog 3 --enable-file simplify-control.txt]\n");
	
    return(0);
}
	
